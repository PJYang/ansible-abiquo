---
# Abiquo
abiquo_profile: monolithic
abiquo_version: "4.2"
abiquo_base_repo: http://mirror.abiquo.com/el$releasever/{{ abiquo_version }}/os/x86_64
abiquo_updates_repo: http://mirror.abiquo.com/el$releasever/{{ abiquo_version }}/updates/x86_64
abiquo_repository_gpg_check: 1

abiquo_install_services: true
abiquo_install_database: true
abiquo_install_frontend: true

# RabbitMQ
abiquo_monitoring_rabbitmq_addresses: localhost:5672
abiquo_monitoring_rabbitmq_username: abiquo
abiquo_monitoring_rabbitmq_password: abiquo
abiquo_monitoring_rabbitmq_vhost: /

# Database
abiquo_monitoring_db_user: abiquo
abiquo_monitoring_db_pass: abiquo
abiquo_monitoring_db_host: localhost
abiquo_monitoring_db_port: 3306
abiquo_monitoring_db_from: 'localhost'

# Frontend
ui_server_name: "{{ ansible_fqdn }}"
ui_server_alias: "{{ ansible_hostname }}"
ui_proxy_timeout: 3600
ui_apache_opts: {}
ui_proxies: {}

ui_cert_source: selfsigned
ui_cert_file: /etc/pki/abiquo/{{ ui_server_name }}.crt
ui_cert_key_file: /etc/pki/abiquo/{{ ui_server_name }}.key
ui_cert_csr_file: /etc/pki/abiquo/{{ ui_server_name }}.csr
# ui_cert_ca_file: ...

ui_config:
  config.endpoint: ""

# KVM
vm_repository_path: 127.0.0.1:/vm_repo
abiquo_aim_port: 8889
abiquo_aim_repository_path: /opt/vm_repository
abiquo_aim_datastore: /var/lib/virt
abiquo_aim_autobackup: false
abiquo_aim_autorestore: false
abiquo_aim_filesystems: ext2,ext3,ext4,nfs,nfs4,xfs,smbf,gfs
abiquo_aim_ifconfig_cmd: /sbin/ifconfig
abiquo_aim_brctl_cmd: /usr/sbin/brctl

# KairosDB
abiquo_monitoring_kairosdb_address: localhost
abiquo_monitoring_kairosdb_port: 8080

# Cassandra
cassandra_cluster_name: abiquo
cassandra_rpc_port: 9160
cassandra_rpc_address: "{{ ansible_default_ipv4.address }}"

# KairosDB
kairosdb_config_file_path: /opt/kairosdb/conf/kairosdb.properties
kariosdb_cassandra_rpc_port: 9160
kariosdb_cassandra_rpc_address: "{{ ansible_default_ipv4.address }}"

# Abiquo
abiquo_default_properties:
  abiquo.auth.module: abiquo
  abiquo.server.sessionTimeout: 60
  abiquo.server.api.location: "https://{{ ansible_fqdn }}/api"
  abiquo.redis.port: 6379
  abiquo.redis.host: 127.0.0.1
  abiquo.rabbitmq.addresses: "{{ abiquo_rabbitmq_addresses }}"
  abiquo.rabbitmq.password: "{{ abiquo_rabbitmq_password }}"
  abiquo.rabbitmq.username: "{{ abiquo_rabbitmq_username }}"
  abiquo.rabbitmq.virtualHost: "{{ abiquo_rabbitmq_vhost }}"
  abiquo.server.mail.server: 127.0.0.1
  abiquo.server.mail.password: none
  abiquo.server.mail.user: none@none.es
  abiquo.m.identity: default_outbound_api_user
  abiquo.m.credential: "{{ abiquo_default_outbound_api_user_password.stdout }}"
  abiquo.m.instanceid: "{{ ansible_hostname }}"
  abiquo.appliancemanager.localRepositoryPath: /opt/vm_repository
  abiquo.appliancemanager.repositoryLocation: 127.0.0.1:/opt/vm_repository
  abiquo.virtualfactory.hyperv.repositoryLocation: //127.0.0.1/vm_repository
  abiquo.virtualfactory.xenserver.repositoryLocation: 127.0.0.1:/opt/vm_repository
  abiquo.nodecollector.timeout: 180000
abiquo_properties: {}

# Reporting
# JasperServer
jasperserver_install_files: /opt/jasper
jasperserver_zip_url: https://downloads.sourceforge.net/project/jasperserver/JasperServer/JasperReports%20Server%20Community%20Edition%206.4.2/TIB_js-jrs-cp_6.4.2_bin.zip
jasperserver_tomcat_server_port: 8080
jasperserver_tomcat_server_shutdown_port: 8005
jasperserver_tomcat_server_ajp_port: 8009
jasperserver_tomcat_server_proxy_port: 8888

# Reporting ZIP url
reporting_core_url: nil

# Server
# Database
abiquo_db_user: abiquo
abiquo_db_pass: abiquo
abiquo_db_host: localhost
abiquo_db_port: 3306
abiquo_db_from: '%'

# RabbitMQ
abiquo_rabbitmq_addresses: 127.0.0.1:5672
abiquo_rabbitmq_password: abiquo
abiquo_rabbitmq_username: abiquo
abiquo_rabbitmq_vhost: /

#Â MariaDB
mariadb_config: {}
default_mariadb_config:
  client:
    port: 3306
    socket: /var/lib/mysql/mysql.sock

  mysqld_safe:
    socket: /var/lib/mysql/mysql.sock
    nice: 0

  mysqld:
    user: mysql
    socket: /var/lib/mysql/mysql.sock
    bind-address: 0.0.0.0
    port: 3306
    default_storage_engine: InnoDB
    basedir: /usr
    datadir: /var/lib/mysql
    tmpdir: /var/tmp
    lc_messages_dir: /usr/share/mysql
    lc_messages: en_US
    max_connections: 100
    connect_timeout: 5
    wait_timeout: 600
    max_allowed_packet: 16M
    thread_cache_size: 128
    sort_buffer_size: 4M
    bulk_insert_buffer_size: 16M
    tmp_table_size: 32M
    max_heap_table_size: 32M
    myisam_recover: BACKUP
    key_buffer_size: 128M
    table_open_cache: 400
    myisam_sort_buffer_size: 512M
    concurrent_insert: 2
    read_buffer_size: 2M
    read_rnd_buffer_size: 1M
    query_cache_limit: 128K
    query_cache_size: 64M
    log_warnings: 2
    slow_query_log_file: /var/log/mysql/mariadb-slow.log
    long_query_time: 10
    log_slow_verbosity: query_plan
    innodb_buffer_pool_size: 256M
    innodb_log_buffer_size: 8M
    innodb_file_per_table: 1
    innodb_open_files: 400
    innodb_io_capacity: 400
    innodb_flush_method: O_DIRECT
    log_bin: /var/log/mysql/mariadb-bin
    sync_binlog: 0
    log_bin_index: /var/log/mysql/mariadb-bin.index
    expire_logs_days: 10
    max_binlog_size: 100M
    server-id: 1
    binlog_format: ROW
    skip-external-locking:

  mysqldump:
    max_allowed_packet: 16M

  isamchk:
    key_buffer: 16M
